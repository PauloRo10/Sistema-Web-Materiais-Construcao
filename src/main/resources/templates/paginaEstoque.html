<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciamento de Estoque</title>
    <link rel="stylesheet" href="/css/pagEstoque.css">
</head>
<body>
    <div class="container">
        <h2>Gerenciamento de Estoque</h2>

        <!-- Formulário para cadastrar produto -->
        <form th:action="@{/estoque/cadastrar}" method="post">
            <label for="produto">Produto</label>
            <input type="text" id="produto" name="produto" required>

            <label for="codigo">Código do Produto</label>
            <input type="text" id="codigo" name="codigo" required>

            <label for="marca">Marca</label>
            <input type="text" id="marca" name="marca" required>

            <label for="cnpj">CNPJ</label>
            <input type="text" id="cnpj" name="cnpj" required>

            <label for="valorEntrada">Valor de Entrada</label>
            <input type="number" id="valorEntrada" name="valorEntrada" step="0.01" required>

            <label for="valorVenda">Valor de Venda</label>
            <input type="number" id="valorVenda" name="valorVenda" step="0.01" required>

            <label for="quantidade">Quantidade</label>
            <input type="number" id="quantidade" name="quantidade" required>

            <label for="detalhes">Detalhes</label>
            <textarea id="detalhes" name="detalhes"></textarea>

            <div class="buttons-row">
                <button type="submit">Cadastrar Produto</button>
                <button type="reset">Limpar</button>
            </div>
        </form>

        <!-- Formulário para entrada e saída de produtos -->
        <form th:action="@{/estoque/entrada}" method="post">
            <label for="codigoEntrada">Código do Produto</label>
            <input type="text" id="codigoEntrada" name="codigo" required>

            <label for="quantidadeEntrada">Quantidade Entrada</label>
            <input type="number" id="quantidadeEntrada" name="quantidade" required>
            <button type="submit">Registrar Entrada</button>
        </form>

        <form th:action="@{/estoque/saida}" method="post">
            <label for="codigoSaida">Código do Produto</label>
            <input type="text" id="codigoSaida" name="codigo" required>

            <label for="quantidadeSaida">Quantidade Saída</label>
            <input type="number" id="quantidadeSaida" name="quantidade" required>
            <button type="submit">Registrar Saída</button>
        </form>

        <!-- Botão para acessar a página de busca de produtos -->
        <div class="buttons-row">
            <a href="/estoque/pagina-busca" class="button">Buscar Produto</a>
        </div>

        <!-- Lista de produtos -->
        <h3>Lista de Produtos no Estoque</h3>
        <table>
            <thead>
                <tr>
                    <th>Código</th>
                    <th>Produto</th>
                    <th>Quantidade</th>
                    <th>Marca</th>
                    <th>Valor Venda</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="produto : ${produtos}">
                    <td th:text="${produto.codigo}"></td>
                    <td th:text="${produto.produto}"></td>
                    <td th:text="${produto.quantidade}"></td>
                    <td th:text="${produto.marca}"></td>
                    <td th:text="${produto.valorVenda}"></td>
                    <td>
                        <form th:action="@{/estoque/excluir}" method="get">
                            <input type="hidden" name="codigo" th:value="${produto.codigo}" />
                            <button type="submit" class="button-delete">Excluir</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>

        <!-- Exibição de mensagens de sucesso ou erro -->
        <div th:if="${mensagemSucesso != null}">
            <p th:text="${mensagemSucesso}" style="color: green;"></p>
        </div>

        <div th:if="${mensagemErro != null}">
            <p th:text="${mensagemErro}" style="color: red;"></p>
        </div>
    </div>
</body>
</html>